{
  "hash": "c4406c41c260e37d98cf07a118eacb05",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"Video Game Recommendations\"\nsubtitle: \"INFO 523 - Fall 2025 - Final Project\"\nauthor: \"Spencer Atchley\"\ntitle-slide-attributes:\n  data-background-image: images/watercolour_sys02_img34_teacup-ocean.jpg\n  data-background-size: stretch\n  data-background-opacity: \"0.7\"\n  data-slide-number: none\nformat:\n  revealjs:\n    theme:  ['data/customtheming.scss']\n  \neditor: visual\njupyter: python3\nexecute:\n  echo: false\n---\n\n\n\n\n# Project Overview\n\n## Project Goals\n- Which video games should be recommended to a user based on their existing library, playtime, and ratings?\n- Which factors (such as genre, platform, or region) most strongly influence a game's global sales performance?\n\n## Tools Used\n- Quarto\n- Jupyter Notebook\n- VSCode\n- Generative AI (more on this in later slides)\n\n## Project Writeup\n- Full writeup included on project site\n- [Project Writeup Link](https://info523-fall25-101-201.github.io/final-project-spencer-atchley-solo/writeup.html)\n\n# Recommendation Engines\n\n## Types of recommendation engines\n- Content-based filtering\n- Collaborative filtering\n\n## Content-based filtering\n- Recommends items to users based off of features and metadata\n- Compares item data and user data to create recommendations\n  - Item data: Video game genres, time to game completion, cost\n  - User data: Previously played genres, game completion %, budget range\n\n## Collaborative filtering\n- Groups users based on similarities\n- Recommends new items to users based off of similar user items\n  - Similar users share similar interests\n  - Uses matrices to represent data\n  - Measures similarity between users\n- Example: User A rated Game1 high, User B rated Game1 high, User A also rated Game2 high, recommend Game2 to User B\n- Susceptible to Cold Start problem\n  - New users have no past history, system can't perform evaluation\n\n## Hybrid filtering\n- Uses both content-based filtering and collaborative filtering\n- Helps to overcome weaknesses from models, such as cold start problem\n\n## Project Choice\n- Collaborative filtering chosen for project\n  - Easier to use as introduction to recommendation engines\n  - Good support using available Python libraries\n  - Good learning opportunity, easier to understand\n\n# Tools and Libraries\n\n## Surprise\n- Simple Python RecommendatIon System Engine\n- Collaborative filtering library\n- Well documented, easy to use\n\n## Other libraries used\n- Standard libraries used throughout course\n  - pandas\n  - numpy\n  - seaborn\n\n# Data sets\n\n## Video Game Sales\n- Thousands of video game sales\n- Various pieces of metadata\n  - Ranking of overall sales\n  - Platform\n  - Year of release\n  - Regional sales and global sales\n\n## Video Game Reviews and Ratings\n- Seemed promising at initial glance\n- EDA determined not feasible for project\n  - Randomly generated data\n\n# Use of Generative AI\n\n## Agentic AI\n- How can we use Agentic AI to assist in data science?\n  - Wanted to explore the use of agentic AI in a practical development setting\n- Used OpenAI Codex\n  - Extension for VSCode\n  - Used GPT-5.1-Codex-Max model\n- Thorough review required\n  - Code review needed on each generated line\n\n# Development Workflow\n\n## Synthetic Dataset Generation\n- Needed synthetic player data\n  - Needed both unique player entities and game ratings\n- Agentic AI used for player_gen script\n- Several attempts and some refinement required\n\n## Jupyter Notebook\n- Common tool for data science workflows\n- Used for exploratory data analysis and recommendation engine\n\n# Code Disclaimer\n\n## Disclaimer\n- Not all code and EDA is included in this presentation\n- See Jupyter Notebook file `notebooks/final.ipynb` for full context\n\n# Exploring the Players dataset\n\n## Inspecting the dataframe\n\n::: {#3864054d .cell execution_count=4}\n``` {.python .cell-code code-fold=\"true\"}\n# Looking at the players dataset.\nplayers.info()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n<class 'pandas.core.frame.DataFrame'>\nRangeIndex: 11959 entries, 0 to 11958\nData columns (total 6 columns):\n #   Column                    Non-Null Count  Dtype  \n---  ------                    --------------  -----  \n 0   user_id                   11959 non-null  int64  \n 1   age_group                 11959 non-null  object \n 2   session_count_per_week    11959 non-null  int64  \n 3   avg_session_length_hours  11959 non-null  float64\n 4   primary_genre             11959 non-null  object \n 5   preferred_platform        11959 non-null  object \ndtypes: float64(1), int64(2), object(3)\nmemory usage: 560.7+ KB\n```\n:::\n:::\n\n\n## Describing the dataframe\n\n::: {#a15cdbd6 .cell execution_count=5}\n``` {.python .cell-code code-fold=\"true\"}\nplayers.describe()\n```\n\n::: {.cell-output .cell-output-display execution_count=640}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>user_id</th>\n      <th>session_count_per_week</th>\n      <th>avg_session_length_hours</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>count</th>\n      <td>11959.000000</td>\n      <td>11959.000000</td>\n      <td>11959.000000</td>\n    </tr>\n    <tr>\n      <th>mean</th>\n      <td>5980.000000</td>\n      <td>5.649218</td>\n      <td>2.014694</td>\n    </tr>\n    <tr>\n      <th>std</th>\n      <td>3452.410269</td>\n      <td>3.296081</td>\n      <td>0.691597</td>\n    </tr>\n    <tr>\n      <th>min</th>\n      <td>1.000000</td>\n      <td>2.000000</td>\n      <td>0.500000</td>\n    </tr>\n    <tr>\n      <th>25%</th>\n      <td>2990.500000</td>\n      <td>3.000000</td>\n      <td>1.540000</td>\n    </tr>\n    <tr>\n      <th>50%</th>\n      <td>5980.000000</td>\n      <td>5.000000</td>\n      <td>2.010000</td>\n    </tr>\n    <tr>\n      <th>75%</th>\n      <td>8969.500000</td>\n      <td>7.000000</td>\n      <td>2.480000</td>\n    </tr>\n    <tr>\n      <th>max</th>\n      <td>11959.000000</td>\n      <td>14.000000</td>\n      <td>4.610000</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n## Examining the age groups\n\n::: {#431d5076 .cell execution_count=6}\n``` {.python .cell-code code-fold=\"true\"}\n# How many players are in each age group?\nplayers['age_group'].value_counts()\n```\n\n::: {.cell-output .cell-output-display execution_count=641}\n```\nage_group\nTeen     5924\nAdult    3646\nKids     2389\nName: count, dtype: int64\n```\n:::\n:::\n\n\n## Average session count and session length per age group\n\n::: {#4304d84a .cell execution_count=7}\n``` {.python .cell-code code-fold=\"true\"}\n# Based off of age group, what are some statistics for number of sessions per week and average session length?\nplayers.groupby('age_group')[['session_count_per_week', 'avg_session_length_hours']].agg(['mean','median','min','max'])\n```\n\n::: {.cell-output .cell-output-display execution_count=642}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead tr th {\n        text-align: left;\n    }\n\n    .dataframe thead tr:last-of-type th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr>\n      <th></th>\n      <th colspan=\"4\" halign=\"left\">session_count_per_week</th>\n      <th colspan=\"4\" halign=\"left\">avg_session_length_hours</th>\n    </tr>\n    <tr>\n      <th></th>\n      <th>mean</th>\n      <th>median</th>\n      <th>min</th>\n      <th>max</th>\n      <th>mean</th>\n      <th>median</th>\n      <th>min</th>\n      <th>max</th>\n    </tr>\n    <tr>\n      <th>age_group</th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>Adult</th>\n      <td>5.702414</td>\n      <td>5.0</td>\n      <td>2</td>\n      <td>14</td>\n      <td>2.026676</td>\n      <td>2.03</td>\n      <td>0.5</td>\n      <td>4.32</td>\n    </tr>\n    <tr>\n      <th>Kids</th>\n      <td>5.687317</td>\n      <td>5.0</td>\n      <td>2</td>\n      <td>14</td>\n      <td>2.011875</td>\n      <td>2.01</td>\n      <td>0.5</td>\n      <td>4.60</td>\n    </tr>\n    <tr>\n      <th>Teen</th>\n      <td>5.601114</td>\n      <td>5.0</td>\n      <td>2</td>\n      <td>14</td>\n      <td>2.008455</td>\n      <td>2.00</td>\n      <td>0.5</td>\n      <td>4.61</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n## Sessions per Week\n\n::: {#d0f3a287 .cell fig.width='5.5' execution_count=8}\n``` {.python .cell-code code-fold=\"true\"}\n# Looking at the distribution of session counts and average session lengths.\nfig, ax = plt.subplots(figsize=(5.5, 5.5 * 0.4))\nax.set_xlabel(\"Session Count per Week\")\nsns.histplot(players['session_count_per_week'], kde=True, ax=ax)\nplt.tight_layout()\n```\n\n::: {.cell-output .cell-output-display}\n![](presentation_files/figure-revealjs/cell-9-output-1.png){width=1591 height=602}\n:::\n:::\n\n\n## Average Session Length In Hours\n\n::: {#ba220b28 .cell fig.width='5.5' execution_count=9}\n``` {.python .cell-code code-fold=\"true\"}\nfig, ax = plt.subplots(figsize=(5.5, 5.5 * 0.4))\nax.set_xlabel(\"Average Session Length (hrs)\")\nsns.histplot(players['avg_session_length_hours'], kde=True, ax=ax)\nplt.tight_layout() \n```\n\n::: {.cell-output .cell-output-display}\n![](presentation_files/figure-revealjs/cell-10-output-1.png){width=1591 height=601}\n:::\n:::\n\n\n# Player Ratings\n\n## Inspecting the dataframe\n\n::: {#6e709a30 .cell execution_count=10}\n``` {.python .cell-code code-fold=\"true\"}\n# Looking at the players dataset.\nplayer_games.info()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n<class 'pandas.core.frame.DataFrame'>\nRangeIndex: 59795 entries, 0 to 59794\nData columns (total 9 columns):\n #   Column          Non-Null Count  Dtype  \n---  ------          --------------  -----  \n 0   user_id         59795 non-null  int64  \n 1   game_title      59795 non-null  object \n 2   platform        59795 non-null  object \n 3   genre           59795 non-null  object \n 4   release_year    58812 non-null  float64\n 5   publisher       59584 non-null  object \n 6   global_sales    59795 non-null  float64\n 7   playtime_hours  59795 non-null  float64\n 8   player_rating   59795 non-null  float64\ndtypes: float64(4), int64(1), object(4)\nmemory usage: 4.1+ MB\n```\n:::\n:::\n\n\n## Describing the dataframe\n\n::: {#9c2e21dc .cell execution_count=11}\n``` {.python .cell-code code-fold=\"true\"}\nplayer_games.describe()\n```\n\n::: {.cell-output .cell-output-display execution_count=646}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>user_id</th>\n      <th>release_year</th>\n      <th>global_sales</th>\n      <th>playtime_hours</th>\n      <th>player_rating</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>count</th>\n      <td>59795.00000</td>\n      <td>58812.000000</td>\n      <td>59795.000000</td>\n      <td>59795.000000</td>\n      <td>59795.000000</td>\n    </tr>\n    <tr>\n      <th>mean</th>\n      <td>5980.00000</td>\n      <td>2006.424641</td>\n      <td>0.537874</td>\n      <td>6.042779</td>\n      <td>2.949367</td>\n    </tr>\n    <tr>\n      <th>std</th>\n      <td>3452.29479</td>\n      <td>5.806611</td>\n      <td>1.614241</td>\n      <td>4.456615</td>\n      <td>0.753637</td>\n    </tr>\n    <tr>\n      <th>min</th>\n      <td>1.00000</td>\n      <td>1980.000000</td>\n      <td>0.010000</td>\n      <td>0.500000</td>\n      <td>1.000000</td>\n    </tr>\n    <tr>\n      <th>25%</th>\n      <td>2990.00000</td>\n      <td>2003.000000</td>\n      <td>0.060000</td>\n      <td>3.458654</td>\n      <td>2.430000</td>\n    </tr>\n    <tr>\n      <th>50%</th>\n      <td>5980.00000</td>\n      <td>2007.000000</td>\n      <td>0.170000</td>\n      <td>5.277986</td>\n      <td>2.930000</td>\n    </tr>\n    <tr>\n      <th>75%</th>\n      <td>8970.00000</td>\n      <td>2010.000000</td>\n      <td>0.470000</td>\n      <td>7.266400</td>\n      <td>3.450000</td>\n    </tr>\n    <tr>\n      <th>max</th>\n      <td>11959.00000</td>\n      <td>2020.000000</td>\n      <td>82.740000</td>\n      <td>40.703874</td>\n      <td>5.000000</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n## Inspecting games per platform\n\n::: {#c9726220 .cell execution_count=12}\n``` {.python .cell-code code-fold=\"true\"}\n# How many games are there per platform?\nplayer_games['platform'].value_counts()\n\n# Definitely skewed towards more modern gaming in this dataset.\n# Especially DS titles - that's mostly Nintendo handheld games.\n```\n\n::: {.cell-output .cell-output-display execution_count=647}\n```\nplatform\nDS      7891\nPS2     7841\nPS3     4790\nWii     4741\nX360    4549\nPSP     4403\nPS      4286\nPC      3416\nXB      2969\nGBA     2966\nGC      1992\n3DS     1808\nPSV     1513\nPS4     1206\nN64     1142\nSNES     846\nXOne     756\nSAT      618\nWiiU     506\n2600     466\nGB       354\nNES      353\nDC       180\nGEN       94\nNG        44\nSCD       21\nWS        20\n3DO       10\nTG16       7\nPCFX       4\nGG         3\nName: count, dtype: int64\n```\n:::\n:::\n\n\n## Inspecting games per genre\n\n::: {#fab51ced .cell execution_count=13}\n``` {.python .cell-code code-fold=\"true\"}\n# How mnay games are there per genre?\nplayer_games['genre'].value_counts()\n\n# Most games are Action or Sports.\n# There are quite a lot of \"Misc\" games too - not sure what those are.#| \n```\n\n::: {.cell-output .cell-output-display execution_count=648}\n```\ngenre\nAction          11970\nSports           8490\nMisc             6290\nRole-Playing     5410\nShooter          4675\nAdventure        4675\nRacing           4530\nPlatform         3180\nSimulation       3055\nFighting         2980\nStrategy         2425\nPuzzle           2115\nName: count, dtype: int64\n```\n:::\n:::\n\n\n## Top Player Ratings by Platform\n\n::: {#6eaaf2b9 .cell fig.width='5.5' execution_count=14}\n``` {.python .cell-code code-fold=\"true\"}\n# Looking at a box plot of platform and player rating\n# I'll sort by the top 10 platforms by average player rating for better visualization.\nfig, ax = plt.subplots(figsize=(5.5, 5.5 * 0.25))\ntop_platforms = player_games.groupby('platform')['player_rating'].mean().sort_values(ascending=False).head(10).index\nsns.boxplot(x='platform', y='player_rating', data=player_games[player_games['platform'].isin(top_platforms)], ax=ax)\nplt.title('Player Ratings by Platform (Top 10 Platforms)')\nplt.xticks(rotation=90)\nplt.show() \n```\n\n::: {.cell-output .cell-output-display}\n![](presentation_files/figure-revealjs/cell-15-output-1.png){width=1473 height=666}\n:::\n:::\n\n\n# Video Game Sales\n\n## Inspecting the dataframe\n\n::: {#1f74ae7d .cell execution_count=15}\n``` {.python .cell-code code-fold=\"true\"}\n# Looking at the players dataset.\nvgsales.info()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n<class 'pandas.core.frame.DataFrame'>\nRangeIndex: 16598 entries, 0 to 16597\nData columns (total 11 columns):\n #   Column        Non-Null Count  Dtype  \n---  ------        --------------  -----  \n 0   Rank          16598 non-null  int64  \n 1   Name          16598 non-null  object \n 2   Platform      16598 non-null  object \n 3   Year          16327 non-null  float64\n 4   Genre         16598 non-null  object \n 5   Publisher     16540 non-null  object \n 6   NA_Sales      16598 non-null  float64\n 7   EU_Sales      16598 non-null  float64\n 8   JP_Sales      16598 non-null  float64\n 9   Other_Sales   16598 non-null  float64\n 10  Global_Sales  16598 non-null  float64\ndtypes: float64(6), int64(1), object(4)\nmemory usage: 1.4+ MB\n```\n:::\n:::\n\n\n## Describing the dataframe\n\n::: {#64605f9e .cell execution_count=16}\n``` {.python .cell-code code-fold=\"true\"}\nvgsales.describe()\n```\n\n::: {.cell-output .cell-output-display execution_count=651}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Rank</th>\n      <th>Year</th>\n      <th>NA_Sales</th>\n      <th>EU_Sales</th>\n      <th>JP_Sales</th>\n      <th>Other_Sales</th>\n      <th>Global_Sales</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>count</th>\n      <td>16598.000000</td>\n      <td>16327.000000</td>\n      <td>16598.000000</td>\n      <td>16598.000000</td>\n      <td>16598.000000</td>\n      <td>16598.000000</td>\n      <td>16598.000000</td>\n    </tr>\n    <tr>\n      <th>mean</th>\n      <td>8300.605254</td>\n      <td>2006.406443</td>\n      <td>0.264667</td>\n      <td>0.146652</td>\n      <td>0.077782</td>\n      <td>0.048063</td>\n      <td>0.537441</td>\n    </tr>\n    <tr>\n      <th>std</th>\n      <td>4791.853933</td>\n      <td>5.828981</td>\n      <td>0.816683</td>\n      <td>0.505351</td>\n      <td>0.309291</td>\n      <td>0.188588</td>\n      <td>1.555028</td>\n    </tr>\n    <tr>\n      <th>min</th>\n      <td>1.000000</td>\n      <td>1980.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.010000</td>\n    </tr>\n    <tr>\n      <th>25%</th>\n      <td>4151.250000</td>\n      <td>2003.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.060000</td>\n    </tr>\n    <tr>\n      <th>50%</th>\n      <td>8300.500000</td>\n      <td>2007.000000</td>\n      <td>0.080000</td>\n      <td>0.020000</td>\n      <td>0.000000</td>\n      <td>0.010000</td>\n      <td>0.170000</td>\n    </tr>\n    <tr>\n      <th>75%</th>\n      <td>12449.750000</td>\n      <td>2010.000000</td>\n      <td>0.240000</td>\n      <td>0.110000</td>\n      <td>0.040000</td>\n      <td>0.040000</td>\n      <td>0.470000</td>\n    </tr>\n    <tr>\n      <th>max</th>\n      <td>16600.000000</td>\n      <td>2020.000000</td>\n      <td>41.490000</td>\n      <td>29.020000</td>\n      <td>10.220000</td>\n      <td>10.570000</td>\n      <td>82.740000</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n## Sales per platform\n\n::: {#89815277 .cell execution_count=17}\n``` {.python .cell-code code-fold=\"true\"}\n# How many sales per platform?\nvgsales['Platform'].value_counts() \n```\n\n::: {.cell-output .cell-output-display execution_count=652}\n```\nPlatform\nDS      2163\nPS2     2161\nPS3     1329\nWii     1325\nX360    1265\nPSP     1213\nPS      1196\nPC       960\nXB       824\nGBA      822\nGC       556\n3DS      509\nPSV      413\nPS4      336\nN64      319\nSNES     239\nXOne     213\nSAT      173\nWiiU     143\n2600     133\nNES       98\nGB        98\nDC        52\nGEN       27\nNG        12\nSCD        6\nWS         6\n3DO        3\nTG16       2\nGG         1\nPCFX       1\nName: count, dtype: int64\n```\n:::\n:::\n\n\n## Sale counts vs Game counts by Platform\n\n::: {#b7c465ea .cell execution_count=18}\n\n::: {.cell-output .cell-output-display}\n![](presentation_files/figure-revealjs/cell-19-output-1.png){width=1591 height=601}\n:::\n:::\n\n\n# The Surprise\n\n## General flow\n- Filter the data frame to user id, game id (title), rating\n- Initialize a Reader object from the dataframe\n- Fit the model\n\n## Filtering the dataframe\n```python\n# First, I need to filter down to a data frame with three columns for this model:\n# UserID, Game Title, and user rating.\n# The player_games csv has those three columns, so I'll go ahead and grab it.\nmodel_df = pd.read_csv(\"../data/player_games.csv\")\ncols_to_keep = ['user_id', 'game_title', 'player_rating']\n\nrating_df = model_df[cols_to_keep]\n```\n\n## 5-fold Cross-Validation\n```python\n# Using surprise\nreader = Reader(rating_scale=(1.0, 5.0))\ndata = Dataset.load_from_df(rating_df, reader)\n\nalgo = SVD()\n\n# Run 5-fold cross-validation and print results\ncross_validate(algo, data, measures=[\"RMSE\", \"MAE\"], cv=5, verbose=True)\n```\n\n## Get-Top-N function\n```python\ndef get_top_n(predictions, n=10):\n    \"\"\"Return the top-N recommendation for each user from a set of predictions.\n\n    Args:\n        predictions(list of Prediction objects): The list of predictions, as\n            returned by the test method of an algorithm.\n        n(int): The number of recommendation to output for each user. Default\n            is 10.\n\n    Returns:\n    A dict where keys are user (raw) ids and values are lists of tuples:\n        [(raw item id, rating estimation), ...] of size n.\n    \"\"\"\n\n    # First map the predictions to each user.\n    top_n = defaultdict(list)\n    for uid, iid, true_r, est, _ in predictions:\n        top_n[uid].append((iid, est))\n\n    # Then sort the predictions for each user and retrieve the k highest ones.\n    for uid, user_ratings in top_n.items():\n        user_ratings.sort(key=lambda x: x[1], reverse=True)\n        top_n[uid] = user_ratings[:n]\n\n    return top_n\n```\n\n## Model Training and Predictions\n```python\n# Train the model on the full dataset\nprint(\"Training the model on the full dataset...\")\ntrainset = data.build_full_trainset()\nalgo.fit(trainset)\nprint(\"Model trained.\")\n\n# Predict ratings for all pairs that are not in the training set.\nprint(\"Generating recommendations...\")\ntestset = trainset.build_anti_testset()\npredictions = algo.test(testset)\nprint(\"Recommendations generated.\")\n\nprint(\"Getting the top 5 recommendations for each user...\")\ntop_n = get_top_n(predictions,n=5)\n\n# Print the recommended items for each user\nfor uid, user_ratings in top_n.items():\n    print(f\"User {uid}:\")\n    for (iid, est) in user_ratings:\n        print(f\"  Game: {iid}, Estimated Rating: {est:0.2f}\")\n    print()\n```\n\n## Model Training and Predictions Output Example\n```\nTraining the model on the full dataset...\nModel trained.\nGenerating recommendations...\nRecommendations generated.\nGetting the top 5 recommendations for each user...\n...\nUser 11389:\n  Game: Over the Hedge: Hammy Goes Nuts!, Estimated Rating: 3.41\n  Game: SWAT: Global Strike Team, Estimated Rating: 3.39\n  Game: Midnight Play! Pack, Estimated Rating: 3.33\n  Game: Kane & Lynch 2: Dog Days, Estimated Rating: 3.33\n  Game: Tenchu: Dark Secret, Estimated Rating: 3.33\n\nUser 11390:\n  Game: Silly Bandz: Play The Craze, Estimated Rating: 3.56\n  Game: Teenage Mutant Ninja Turtles: Mutants in Manhattan, Estimated Rating: 3.48\n  Game: Royal Palace of White Sword and The City of Gentiles, Estimated Rating: 3.45\n  Game: Hot Wheels: Battle Force 5, Estimated Rating: 3.44\n  Game: Hitman 2: Silent Assassin, Estimated Rating: 3.43\n\nUser 11391:\n  Game: Teenage Mutant Ninja Turtles: Mutants in Manhattan, Estimated Rating: 3.45\n  Game: Higurashi no Nakukoru ni Kizuna: Dai-Ni-Kan - Sou, Estimated Rating: 3.44\n  Game: Legaia 2: Duel Saga, Estimated Rating: 3.44\n  Game: Seinaru Kana: Orichalcum no Na no Motoni, Estimated Rating: 3.40\n  Game: Need for Speed Underground, Estimated Rating: 3.38\n\n```\n\n# Part 2: What influences a game global sales performance?\n\n## The Question\n- Can we determine factors from the data that may influence global sales?\n- Initially planned to use ratings data set, but dropped due to reasons mentioned before\n\n\n## Sales Distribution\n\n::: {#73fc2604 .cell execution_count=20}\n``` {.python .cell-code code-fold=\"true\"}\n# Let's peek at the sales distribution and how totals moved over time.\nfig, ax = plt.subplots(figsize=(5.5, 5.5 * 0.35))\nsns.histplot(sales_clean['Global_Sales'], bins=30, ax=ax)\nax.set_title('Global sales are very skewed (millions)')\nplt.tight_layout() \n```\n\n::: {.cell-output .cell-output-display}\n![](presentation_files/figure-revealjs/cell-21-output-1.png){width=1591 height=519}\n:::\n:::\n\n\n## Totals Over Time\n\n::: {#a03ffb19 .cell execution_count=21}\n``` {.python .cell-code code-fold=\"true\"}\nfig, ax = plt.subplots(figsize=(5.5, 5.5 * 0.35))\nyearly = sales_clean.groupby('Year')['Global_Sales'].agg(total='sum', mean='mean')\nax.plot(yearly.index, yearly['total'], label='Total global sales')\nax.plot(yearly.index, yearly['mean'], label='Avg per title')\nax.axvspan(2006, 2011, color='orange', alpha=0.15)\nax.set_title('Sales peaked in the mid-late 2000s')\nax.legend()\nplt.tight_layout()\n```\n\n::: {.cell-output .cell-output-display}\n![](presentation_files/figure-revealjs/cell-22-output-1.png){width=1591 height=519}\n:::\n:::\n\n\n## Genre Sales\n\n::: {#f4383bb5 .cell execution_count=22}\n\n::: {.cell-output .cell-output-display}\n![](presentation_files/figure-revealjs/cell-23-output-1.png){width=1562 height=767}\n:::\n:::\n\n\n## Publishers and global sales\n\n::: {#45c91ae3 .cell execution_count=23}\n\n::: {.cell-output .cell-output-display}\n![](presentation_files/figure-revealjs/cell-24-output-1.png){width=1829 height=766}\n:::\n:::\n\n\n## Key Takeaways from EDA\n- Sales are highly skewed; a small set of blockbusters dominates volume.\n- Global totals (and per-title averages) peak around 2006â€“2011, then taper off.\n  - This could be due to data incompleteness for more recent years, or a real trend.\n\n\n## Key Takeaways (cont)\n- Platform, Shooter, and Sports games post the highest medians.\n- Nintendo, EA, and Activision lead cumulative sales.\n- For the biggest 200 games, NA and EU carry the bulk of global revenue; Japan is meaningful but smaller.\n- View the full EDA in the Notebook file\n\n",
    "supporting": [
      "presentation_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js\" integrity=\"sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js\" integrity=\"sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2\" crossorigin=\"anonymous\" data-relocate-top=\"true\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}